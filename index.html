<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ™ºèƒ½å•è¯é—ªå¡ç³»ç»Ÿ</title>
    <style>
        :root {
            --primary-color: #2196F3;
            --success-color: #4CAF50;
            --error-color: #f44336;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: #f5f5f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            position: relative;
        }

        /* æ–°å¢åª’ä½“æŸ¥è¯¢ */
        @media (max-width: 768px) {
            body {
                padding: 10px;  /* ä¿®æ”¹ */
            }
            
            .flashcard-wrapper {
                width: 100%;  /* ä¿®æ”¹ */
                height: 50vh;  /* æ–°å¢ */
                margin: 10px 0 30px;  /* ä¿®æ”¹ */
            }

            .front {
                font-size: 1.8em !important;  /* ä¿®æ”¹ */
            }

            .translation {
                font-size: 1.5em !important;  /* ä¿®æ”¹ */
            }

            .controls {
                flex-direction: column;  /* æ–°å¢ */
                width: 100%;  /* æ–°å¢ */
                max-width: 300px;  /* æ–°å¢ */
            }

            button {
                width: 100%;  /* æ–°å¢ */
                margin: 5px 0;  /* æ–°å¢ */
            }

            .stats {
                left: 10px;  /* ä¿®æ”¹ */
                bottom: 10px;  /* ä¿®æ”¹ */
                padding: 10px;  /* ä¿®æ”¹ */
                font-size: 0.9em;  /* æ–°å¢ */
            }

            .manage-panel {
                right: 10px;  /* ä¿®æ”¹ */
                bottom: 10px;  /* ä¿®æ”¹ */
                padding: 10px;  /* ä¿®æ”¹ */
            }

            .mastered-panel {
                width: 100%;  /* ä¿®æ”¹ */
                box-shadow: none;  /* æ–°å¢ */
            }
        }        

        .stats {
            position: fixed;
            left: 20px;
            bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* æ–°å¢å›ºå®šå°ºå¯¸å®¹å™¨ */
        .flashcard-wrapper {
            width: 500px;
            height: 280px;
            margin: 20px 0 50px;
        }

        .flashcard-container {
            perspective: 1000px;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .flashcard {
            width: 100%;
            height: 100%;
            position: absolute;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
            top: 0;
            left: 0;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            box-sizing: border-box;
            top: 0;
            left: 0;
        }

        .front {
            font-size: 2.5em;
            color: var(--primary-color);
            align-items: center;
            justify-content: center;
        }

        .back {
            transform: rotateY(180deg);
        }

        .translation {
            font-size: 2em;
            color: var(--success-color);
            margin-bottom: 15px;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            position: relative;
            z-index: 2;
        }

        button {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
            position: relative;
        }

        .speaker-btn {
            background: var(--primary-color);
            color: white;
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 10px;
        }

        .master-btn {
            background: var(--success-color);
            color: white;
        }

        .next-btn {
            background: #FF9800;
            color: white;
        }

        .manage-panel {
            position: fixed;
            right: 20px;
            bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .mastered-panel {
            position: fixed;
            right: 0;
            top: 0;
            width: 300px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            padding: 20px;
            overflow-y: auto;
            transform: translateX(100%);
            transition: transform 0.3s;
        }

        .mastered-panel.active {
            transform: translateX(0);
        }

        .mastered-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.3s;
        }

        .mastered-item:hover {
            background: #f5f5f5;
        }

        .delete-btn {
            color: var(--error-color);
            margin-left: 10px;
            display: none;
        }

        .mastered-item:hover .delete-btn {
            display: inline;
        }

        .privacy-notice {
            position: fixed;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 600px;
            text-align: center;
            padding: 8px 15px;
            background: rgba(255,255,255,0.9);
            border-radius: 4px;
            font-size: 0.8em;
            color: #666;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 999;
        }

        .privacy-notice a {
          color: #2196F3;
          text-decoration: none;
          border-bottom: 1px dotted currentColor;
        }
        
        .privacy-notice a:hover {
          color: #1565C0;
        }
        /* æ–°å¢è§¦æ‘¸ä¼˜åŒ– */
        button {
            min-width: 44px;  /* ç¬¦åˆWCAGæ ‡å‡† */
            min-height: 44px;
        }

        .flashcard {
            touch-action: manipulation;  /* é˜²æ­¢åŒå‡»ç¼©æ”¾ */
        }
    </style>
    <!-- åœ¨<head>æ ‡ç­¾å†…æ·»åŠ ä»¥ä¸‹å†…å®¹ -->
<script>
    const embeddedWordData = {
      "ä¸€å¹´çº§ä¸Š": {
        "Module1": [
          {
            "word": "hello",
            "translation": "ä½ å¥½",
            "pos": "åè¯",
            "definition": "Hello! ä½ å¥½ï¼",
            "example": "Hello! ä½ å¥½ï¼"
          },
          {
            "word": "am",
            "translation": "æ˜¯ï¼ˆæˆ‘æ˜¯ï¼‰",
            "pos": "åè¯",
            "definition": "am",
            "example": "The American team won the championship."
          },
          {
            "word": "goodbye",
            "translation": "å†è§",
            "pos": "åè¯",
            "definition": "Goodbye is an action that means to send a message to someone you miss. It also implies leaving behind something or someone.",
            "example": "The teacher gave a goodbye at the end of the exam."
          },
          {
            "word": "Howareyou?",
            "translation": "ä½ å¥½ä¹ˆï¼Ÿ",
            "pos": "åè¯",
            "definition": "You are asking how well you are doing.",
            "example": "I'm _____ to your email."
          },
          {
            "word": "no",
            "translation": "ä¸ï¼Œä¸æ˜¯",
            "pos": "æœªçŸ¥",
            "definition": "æš‚æ— é‡Šä¹‰",
            "example": "æš‚æ— ä¾‹å¥"
          },
          {
            "word": "yes",
            "translation": "æ˜¯ï¼Œæ˜¯çš„",
            "pos": "åè¯",
            "definition": "Yes",
            "example": "The answer is Yes."
          },
          {
            "word": "sorry",
            "translation": "å¯¹ä¸èµ·",
            "pos": "åè¯",
            "definition": "A word used to describe a person, place, thing, or idea that is separate from its modifiers. It can be used in both countable and uncountable forms.",
            "example": "The deliciousness of the food was hard to quantify."
          },
          {
            "word": "fine",
            "translation": "ï¼ˆèº«ä½“ï¼‰å¾ˆå¥½",
            "pos": "åè¯",
            "definition": "good",
            "example": "The painting is a masterpiece."
          },
          {
            "word": "thank",
            "translation": "è°¢è°¢",
            "pos": "åè¯",
            "definition": "Thank you is a common way to express gratitude.",
            "example": "Thank you for your kindness."
          },
          {
            "word": "you",
            "translation": "ä½ ",
            "pos": "åè¯",
            "definition": "You are the one who is responsible for making decisions.",
            "example": "The manager said, 'You are the one who is responsible for making decisions.'"
          },
          {
            "word": "boy",
            "translation": "ç”·å­©",
            "pos": "åè¯",
            "definition": "boy",
            "example": "Hello! ä½ å¥½ï¼"
          },
          {
            "word": "girl",
            "translation": "å¥³å­©",
            "pos": "åè¯",
            "definition": "A person who is female.",
            "example": "The girl arrived early at the party."
          },
          {
            "word": "afternoon",
            "translation": "ä¸‹åˆ",
            "pos": "åè¯",
            "definition": "midday time",
            "example": "The afternoon is the warmest part of the day."
          },
          {
            "word": "panda",
            "translation": "ç†ŠçŒ«",
            "pos": "åè¯",
            "definition": "Panda is a type of animal that has four legs and two heads.",
            "example": "The pandas are very intelligent and hardworking."
          }
        ],
        "Module2": [
          {
            "word": "what",
            "translation": "ä»€ä¹ˆ",
            "pos": "åè¯",
            "definition": "the smallest part of speech that can be recognized by the human ear and is used to identify a word or phrase. ",
            "example": "The word 'dog' consists of multiple sounds."
          },
          {
            "word": "is",
            "translation": "æ˜¯ï¼ˆæ˜¯ä»€ä¹ˆï¼‰",
            "pos": "æœªçŸ¥",
            "definition": "æš‚æ— é‡Šä¹‰",
            "example": "æš‚æ— ä¾‹å¥"
          },
          {
            "word": "your",
            "translation": "ä½ çš„",
            "pos": "åè¯",
            "definition": "I am a student.",
            "example": "Hello! I'm a student. Please come to my class today."
          },
          {
            "word": "name",
            "translation": "åå­—",
            "pos": "æœªçŸ¥",
            "definition": "æš‚æ— é‡Šä¹‰",
            "example": "æš‚æ— ä¾‹å¥"
          },
          {
            "word": "please",
            "translation": "è¯·",
            "pos": "åè¯",
            "definition": "Please provide the word 'please' in English.",
            "example": "The teacher said, 'Please stand up.'"
          },
          {
            "word": "good",
            "translation": "å¥½çš„",
            "pos": "åè¯",
            "definition": "Good is an adjective that means nice or pleasant.",
            "example": "She said, 'It's a very good day.'"
          },
          {
            "word": "morning",
            "translation": "æ—©æ™¨ï¼Œä¸Šåˆ",
            "pos": "åè¯",
            "definition": "midnightåˆ°7ç‚¹ä¹‹é—´çš„æ—¶åˆ»",
            "example": "æš‚æ— ä¾‹å¥"
          },
          {
            "word": "Ms",
            "translation": "å¥³å£«",
            "pos": "æœªçŸ¥",
            "definition": "æš‚æ— é‡Šä¹‰",
            "example": "æš‚æ— ä¾‹å¥"
          },
          {
            "word": "my",
            "translation": "æˆ‘çš„",
            "pos": "åè¯",
            "definition": "I am a person.",
            "example": "He is a student."
          },
          {
            "word": "bird",
            "translation": "é¸Ÿ",
            "pos": "åè¯",
            "definition": "An animal that flits through the air with wings.",
            "example": "Birds are often seen in nature and enjoy singing."
          }
        ]
      }
    };
  </script>
</head>
<body>
    <div class="flashcard-wrapper">
        <div class="flashcard-container">
            <div class="flashcard">
                <div class="card-face front">
                    <span id="current-word">Loading...</span>
                    <button class="speaker-btn" onclick="speakWord(event)">ğŸ”Š</button>
                </div>
                <div class="card-face back">
                    <div class="translation" id="translation"></div>
                    <div id="details"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="master-btn" onclick="markAsMastered()">å·²æŒæ¡</button>
        <button class="next-btn" onclick="nextWord()">éšæœºä¸‹ä¸€ä¸ª</button>
    </div>

    <div class="stats">
        <span id="progress">è¿›åº¦ï¼š0/0</span>
    </div>

    <div class="manage-panel">
        <button onclick="showMasteredWords()">ç®¡ç†å·²æŒæ¡å•è¯</button>
        <button onclick="clearAllProgress()" style="margin-top: 10px;">é‡ç½®å­¦ä¹ è¿›åº¦</button>
    </div>

    <div class="mastered-panel" id="masteredPanel">
        <h3>å·²æŒæ¡å•è¯ï¼ˆç‚¹å‡»åˆ é™¤ï¼‰</h3>
        <div id="masteredList"></div>
    </div>

    <script>
        let allWords = [];
        let currentWord = null;
        let masteredWords = JSON.parse(localStorage.getItem('masteredWords') || '[]');

        // åˆå§‹åŒ–è¯­éŸ³åˆæˆ
        const synth = window.speechSynthesis;
        
        // æ–°ä»£ç ï¼ˆç›´æ¥ä½¿ç”¨å†…åµŒæ•°æ®ï¼‰
        try {
          allWords = flattenData(embeddedWordData);
          updateProgress();
          nextWord();
        } catch (error) {
          console.error('è¯åº“åˆå§‹åŒ–å¤±è´¥:', error);
          alert('ç³»ç»Ÿé”™è¯¯ï¼šè¯åº“åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢');
        }

        function flattenData(data) {
            return Object.entries(data).flatMap(([grade, modules]) => 
                Object.entries(modules).flatMap(([module, words]) => 
                    words.map(word => ({
                        ...word,
                        grade,
                        module
                    }))
                )
            );
        }

        function getRandomWord() {
            const availableWords = allWords.filter(word => 
                !masteredWords.includes(word.word)
            );
            return availableWords[Math.floor(Math.random() * availableWords.length)];
        }

        function updateCard(word) {
            currentWord = word;
            document.getElementById('current-word').textContent = word.word;
            document.getElementById('translation').textContent = word.translation;
            document.getElementById('details').innerHTML = `
                <p>å¹´çº§ï¼š${word.grade}ï½œå•å…ƒï¼š${word.module}</p>
                <p style="margin-top:15px;color:#666">${word.example}</p>
            `;
        }

        function nextWord() {
            const word = getRandomWord();
            if (!word) return alert("æ‰€æœ‰å•è¯å·²å­¦ä¹ å®Œæˆï¼");
            document.querySelector('.flashcard').classList.remove('flipped');
            setTimeout(() => updateCard(word), 300);
        }

        function markAsMastered() {
            if (!currentWord) return;

            const flashcard = document.querySelector('.flashcard');
            const isFront = !flashcard.classList.contains('flipped');

            // å¦‚æœæ˜¯æ­£é¢å…ˆç¿»è½¬
            if (isFront) {
                flashcard.classList.add('flipped');

                // ä¸‰ç§’åæ‰§è¡Œåç»­æ“ä½œ
                setTimeout(() => {
                    // æäº¤æŒæ¡çŠ¶æ€
                    if (!masteredWords.includes(currentWord.word)) {
                        masteredWords.push(currentWord.word);
                        localStorage.setItem('masteredWords', JSON.stringify(masteredWords));
                        updateProgress();
                    }

                    // åˆ‡æ¢å•è¯å¹¶ç¿»å›æ­£é¢
                    nextWord();
                }, 3000);
            } else {
                // åŸæœ‰é€»è¾‘ï¼ˆç›´æ¥å¤„ç†ï¼‰
                if (!masteredWords.includes(currentWord.word)) {
                    masteredWords.push(currentWord.word);
                    localStorage.setItem('masteredWords', JSON.stringify(masteredWords));
                    updateProgress();
                }
                nextWord();
            }
        }

        function speakWord(event) {
            event.stopPropagation();
            if (!currentWord) return;
            const utterance = new SpeechSynthesisUtterance(currentWord.word);
            utterance.lang = 'en-US';
            synth.speak(utterance);
        }

        function updateProgress() {
            document.getElementById('progress').textContent = 
                `è¿›åº¦ï¼š${masteredWords.length}/${allWords.length}`;
        }

        function showMasteredWords() {
            document.getElementById('masteredPanel').classList.add('active');
            const listContainer = document.getElementById('masteredList');
            listContainer.innerHTML = masteredWords.map(wordStr => {
                // ä»allWordsä¸­æŸ¥æ‰¾å®Œæ•´æ•°æ®
                const wordData = allWords.find(w => w.word === wordStr);
                return `
                    <div class="mastered-item" onclick="handleMasteredWord('${wordStr}')">
                        <div>${wordStr}</div>
                        <div style="font-size:0.9em;color:#666">${wordData?.translation || 'ç¿»è¯‘æœªæ‰¾åˆ°'}</div>
                        <span class="delete-btn" onclick="removeMasteredWord('${wordStr}')">Ã— åˆ é™¤</span>
                    </div>
                `;
            }).join('');
        }

        function removeMasteredWord(word) {
            event.stopPropagation();
            masteredWords = masteredWords.filter(w => w !== word);
            localStorage.setItem('masteredWords', JSON.stringify(masteredWords));
            updateProgress();
            showMasteredWords();
        }

        function handleMasteredWord(word) {
            const items = document.querySelectorAll('.mastered-item');
            items.forEach(item => item.style.background = 'transparent');
            event.currentTarget.style.background = '#f5f5f5';
        }

        function clearAllProgress() {
            if (confirm("ç¡®è®¤è¦é‡ç½®æ‰€æœ‰å­¦ä¹ è¿›åº¦å—ï¼Ÿ")) {
                masteredWords = [];
                localStorage.removeItem('masteredWords');
                updateProgress();
                nextWord();
                document.getElementById('masteredPanel').classList.remove('active');
            }
        }

        // å¡ç‰‡ç‚¹å‡»äº‹ä»¶ä¼˜åŒ–
        document.querySelector('.flashcard').addEventListener('click', (e) => {
            if (e.target.closest('button') || 
                e.target.closest('.translation') ||
                e.target.closest('#details')) return;
            document.querySelector('.flashcard').classList.toggle('flipped');
        });

        // å…³é—­ç®¡ç†é¢æ¿
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.mastered-panel') && 
                !e.target.closest('.manage-panel button')) {
                document.getElementById('masteredPanel').classList.remove('active');
            }
        });
    </script>
    <!-- æ–°å¢éšç§å£°æ˜ -->
    <div class="privacy-notice">
        <small>
          ğŸ“Œ éšç§è¯´æ˜ï¼šæ‚¨çš„å­¦ä¹ è¿›åº¦æ•°æ®ï¼ˆå·²æŒæ¡å•è¯ï¼‰ä»…å­˜å‚¨åœ¨æœ¬åœ°è®¾å¤‡ä¸­ï¼Œä¸ä¼šä¸Šä¼ è‡³ä»»ä½•æœåŠ¡å™¨ã€‚
          æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å°†åˆ é™¤è¿™äº›æ•°æ®ï¼Œæ‚¨ä¹Ÿå¯ä»¥éšæ—¶ä½¿ç”¨æœ¬é¡µé¢çš„<a href="javascript:clearAllProgress()">é‡ç½®å­¦ä¹ è¿›åº¦</a>åŠŸèƒ½ã€‚
        </small>
      </div>
</body>
</html>
